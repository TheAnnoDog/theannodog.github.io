(function(e,t){e.contextual.VisualView=t.View.extend({events:function(){var t=function(e){e.preventDefault();e.target.click()},e=!1;return{touchstart:function(){e=!0},mouseenter:function(){if(!e){this.model.focus()}},mousemove:function(){e=!1},'click .trigger':function(){this.model.toggleOpen()},'touchend .trigger':t,'click .contextual-links a':function(){this.model.close().blur()},'touchend .contextual-links a':t}},initialize:function(){this.listenTo(this.model,'change',this.render)},render:function(){var e=this.model.get('isOpen'),t=this.model.get('isLocked')||this.model.get('regionIsHovered')||e;this.$el.toggleClass('open',e).find('.trigger').toggleClass('visually-hidden',!t);if('isOpen' in this.model.changed){this.$el.closest('.contextual-region').find('.contextual .trigger:not(:first)').toggle(!e)};return this}})})(Drupal,Backbone);